classDiagram
    class Task {
        -title: str
        -task_type: str
        -duration_minutes: int
        -priority: str
        -time_window: tuple~int, int~
        -notes: str
        -start_time: Optional~int~
        -depends_on: Optional~str~
        -is_flexible: bool
        -completed: bool
        -frequency: Optional~str~
        +validate() bool
        +get_details() dict
        +create_next_occurrence() Optional~Task~
    }

    class Pet {
        -name: str
        -species: str
        -needs: list~str~
        -preferences: dict~str, str~
        +add_preference(key: str, value: str)
        +get_preferences() dict
    }

    class PetOwner {
        -name: str
        -availability: tuple~int, int~
        -preferences: dict~str, str~
        +add_preference(key: str, value: str)
        +get_preferences() dict
    }

    class PlanItem {
        -task: Task
        -scheduled_time: int
        -duration_minutes: int
        -reason: str
        +get_summary() str
    }

    class Scheduler {
        -tasks: list~Task~
        -pet: Optional~Pet~
        -owner: Optional~PetOwner~
        -break_time_minutes: int
        +add_task(task: Task) bool
        +set_pet(pet: Pet)
        +set_owner(owner: PetOwner)
        +generate_plan() list~PlanItem~
        +sort_by_time() list~Task~
        +filter_tasks(completed: Optional~bool~, pet_name: Optional~str~) list~Task~
        +mark_task_complete(task: Task) Optional~Task~
        +detect_scheduling_conflicts() list~str~
        -_get_dynamic_priority(task: Task, current_time: int) float
        -_check_dependencies(task: Task, scheduled_tasks: list~Task~) bool
        -_try_schedule_at(task: Task, start_time: int, occupied_slots: list~tuple~) bool
        -_find_best_time(task: Task, earliest_start: int, latest_end: int, occupied_slots: list~tuple~) Optional~int~
        -_fill_gaps(plan: list~PlanItem~, flexible_tasks: list~Task~, owner_availability: tuple~int, int~) list~PlanItem~
        -_tasks_overlap(task1: Task, task2: Task) Optional~int~
    }

    PetOwner "1" -- "0..1" Pet : owns
    Scheduler "1" -- "*" Task : manages
    Scheduler "1" -- "0..1" Pet : schedules for
    Scheduler "1" -- "0..1" PetOwner : considers availability
    Scheduler "1" -- "*" PlanItem : generates
    PlanItem "*" -- "1" Task : references
    Task "0..1" -- "0..1" Task : depends on
